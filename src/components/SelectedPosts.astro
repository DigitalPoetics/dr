---
import BlogPost from './BlogPost.astro';
const {frontmatter, index } = Astro.props;
const isIndexActive = Astro.url.pathname === `/${index}`;

// selected posts
const allPosts = Object.values(import.meta.glob('../pages/posts/*.md', { eager: true }));
// const allPosts = Object.values(import.meta.glob('../pages/posts/*.md', { eager: true }));
// const selectedPosts = allPosts.filter((post:any) =>
//     post.frontmatter?.tags?.includes(frontmatter.tags[0])
// )

// const currentIndex = Astro.props.frontmatter.index;
const selectedPosts = allPosts.filter((post:any) =>
    post.frontmatter?.index === index
)

---
 <!-- Blog posts -->
<a href={`/${index}`} class={isIndexActive ? 'active' : ''}><i>{frontmatter?.tags?.[0] ?? 'Index'}</i></a>
<ul>
    {selectedPosts.map((post: any) => 
    <BlogPost 
        url={post.url} 
        title={post.frontmatter.title} 
        description={post.frontmatter.description}/>)}
</ul>

<style>
    a {
        text-decoration: none;
        padding: 0 0 0 2rem;
        margin-top: 2rem;
        color: var(--light-text);
    }

    a:hover, a:focus {
        color: var(--hover-color);
    }

    a.active {
        font-weight: bold;
        color: var(--highlight-color);
        /* border-bottom: var(--border-color); */
    }
    html.dark a.active {
        color: var(--highlight-color);
    }

    html.dark a {
        color: var(--dark-text);
    }

    html.dark a:hover, html.dark a:focus {
        color: var(--hover-color);
    }
</style>